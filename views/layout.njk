{% import "modals.njk" as modals %}
<!DOCTYPE html>
<html>
    <head>
        <title>{% block title %}Plywood - Jira Worklog Management{% endblock %}</title>
        <link href='/stylesheets/style.css' rel='stylesheet' />
        <meta http-equiv='Content-Security-Policy' content="font-src data:" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="jira-url" content="{{ jiraUrl }}">
        <meta charset='utf-8' />
        <link rel="stylesheet" href="/stylesheets/choices.min.css" />
        <link type="image/png" sizes="96x96" rel="icon" href="/images/icons8-plywood-96.png">

        <script src="/javascripts/choices.min.js"></script>
        <script src="/javascripts/moment.min.js"></script>
        <script src="/javascripts/moment-duration-format.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        {% block head %}{% endblock %}
    </head>
    <body>
        {{ modals.modals() }}

        {% block content %}{% endblock %}        <!-- Notes Side Panel -->
        <div id="notesSidePanel" class="notes-side-panel">
            <div class="notes-panel-header">
                <div class="notes-header-top">
                    <h3>Notes <span id="notesPanelContext"></span></h3>
                    <button id="closeNotesPanel" class="close-panel-button">&times;</button>
                </div>
            </div>
            
            <div class="notes-panel-content">
                <div id="notesLoading" class="loading-indicator">Loading notes...</div>
                <div id="saveIndicator" class="save-indicator hidden">Saving...</div>
                <textarea id="notesContent" class="notes-textarea" placeholder="Type your notes here..."></textarea>
            </div>
        </div>
        
        <footer class="app-footer">
            <div class="footer-left">
                <div class="hamburger-menu">
                    <button id="menuButton" class="hamburger-button">‚ò∞</button>
                    <div id="menuContent" class="menu-content">
                        <div class="menu-item project-item">
                            <select id="headerProjectSelection" class="project-selector">
                                <option value="all">All Projects</option>
                            </select>
                        </div>
                        <div class="menu-item" onclick="window.location.href='/'">
                            <span>üìÖ Calendar</span>
                        </div>                        <div class="menu-item" onclick="window.location.href='/stats'">
                            <span>üìä Statistics</span>
                        </div>
                        <div class="menu-item" onclick="showNotesListModal()">
                            <span>üìù Notes</span>
                        </div>
                        <div class="menu-item" onclick="toggleConfigModal()">
                            <span>‚öôÔ∏è Settings</span>
                        </div>
                        <div class="menu-item" onclick="showAboutModal()">
                            <span>‚ÑπÔ∏è About</span>
                        </div>
                        <div class="menu-item" onclick="window.location.href='/auth/logout'">
                            <span>üö™ Logout</span>
                        </div>
                    </div>
                </div>
                {% block footer_left %}{% endblock %}
            </div>

            <div class="footer-center">
                <div id="total-time">
                    {% block footer_center %}{% endblock %}
                </div>
            </div>            <div class="footer-right">                <div id="loading-container">
                    <img id="loading" src="/images/icons8-dots-loading.gif" style="background-color:transparent"/>
                </div>
                {% block footer_right %}{% endblock %}
                <button id="toggleNotesButton" title="Toggle Notes Panel" onclick="toggleNotesPanel()" class="footer-icon-button">üìù</button>
            </div>
        </footer>        <script src="https://unpkg.com/@popperjs/core@2"></script>
        <script src="https://unpkg.com/tippy.js@6"></script>
        <!-- Non-module script for global functions -->
        <script src="/javascripts/notes-global.js"></script>
        <script src="/javascripts/notes-resizing.js"></script>
        <script src="/javascripts/plywood/ui.js" type="module"></script>
        <script src="/javascripts/plywood/modal.js" type="module"></script>
        {% block scripts %}{% endblock %}
    </body>
</html>