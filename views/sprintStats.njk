{% extends "layout.njk" %}

{% block head %}
<script src="/javascripts/plywood/stats.js" type="module"></script>
{% endblock %}

{% block scripts %}
<script src="/javascripts/plywood/main.js" type="module"></script>
{% endblock %}

{% block content %}
<div class="stats-page">
    <div class="stats-header">
        <button onclick="window.location.href='/'" class="back-button">← Back to Calendar</button>
        <div class="date-controls">
            <input type="date" id="startDate" class="date-input">
            <span>to</span>
            <input type="date" id="endDate" class="date-input">
            <button id="refreshStats" class="refresh-button">Refresh</button>
        </div>
    </div>
    
    <div class="stats-container">
        <!-- Charts Section -->
        <div class="stats-section charts-section">
            <h2>Worklog Analysis</h2>
            <div class="chart-container">
                <canvas id="analysisChart"></canvas>
            </div>
            <div class="chart-controls">
                <div class="chart-selector">
                    <button class="type-button active" data-type="issueTypes">
                        <span>📊 By Issue Type</span>
                    </button>
                    <button class="type-button" data-type="issues">
                        <span>🎫 By Issue</span>
                    </button>
                    <button class="type-button" data-type="projects">
                        <span>📁 By Project</span>
                    </button>
                </div>
                <button id="toggleChart" class="chart-toggle">🥧</button>
            </div>
        </div>
        
        <!-- Issue List Section -->
        <div class="stats-section">
            <h2>📋 Issue Details</h2>
            <div id="timeSpentList" class="stats-list"></div>
        </div>
    </div>
</div>
{% endblock %}