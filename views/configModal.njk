{% macro modal() %}
<div class="modal unselectable modal-config" id="configModal" style="display: none">
  <div class="modal-content">
    <h2>Settings</h2>
    <form id="configForm" class="modal-form">
      <div class="config-section">
        <h3>Issue Settings</h3>
        <div class="form-group">
          <label for="showIssueTypeIcons">
            Show issue type icons
          </label>
          <input type="checkbox" id="showIssueTypeIcons" checked name="showIssueTypeIcons">
        </div>
        <div class="form-group">
          <label for="themeSelection">Theme:</label>
          <select id="themeSelection" name="themeSelection">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
            <option value="auto">Auto</option>
          </select>
        </div>
      </div>
      <div class="config-section">
        <h3 onclick="toggleSection('colorsSection')" style="cursor: pointer;">
          Colors
          <span id="colorsSectionArrow" class="arrow">â—€</span>
        </h3>
        <div id="colorsSection" class="form-group" style="display: none;">
          <div id="issueTypeColors">
            <!-- Issue type color inputs will be dynamically added here -->
          </div>
          <button type="button" class="primary" onclick="addIssueType()">â•</button>
        </div>
      </div>
      <div class="config-section">
        <h3>Timer Settings</h3>
        <div class="form-group">
          <label for="rounding-interval">Timer rounding interval (minutes):</label>
          <input type="number" id="rounding-interval" name="roundingInterval" value="15" min="1">
        </div>
        <div class="form-group">
          <label for="save-timer-on-issue-switch">
            Save timer when switching issue
          </label>
          <input type="checkbox" id="save-timer-on-issue-switch" name="saveTimerOnIssueSwitch">
        </div>
      </div>
      <div class="config-section">
        <h3>Icon Cache</h3>
        <div class="form-group">
          <p>Issue type icons are cached locally for better performance.</p>
          <button type="button" class="secondary" onclick="showIconCacheInfo()">ğŸ“Š Cache Info</button>
          <button type="button" class="secondary" onclick="cleanupIconCache()">ğŸ§¹ Cleanup Cache</button>
        </div>
        <div id="iconCacheInfo" style="display: none; margin-top: 10px;">
          <div id="iconCacheDetails"></div>
        </div>
      </div>
      <div class="buttons">
        <button id="close-btn-config" onclick="hideModal('#configModal')" title="Close" class="close-btn" type="button">âœ–ï¸</button>
        <button type="button" class="success" onclick="saveConfig()">ğŸ’¾</button>
      </div>
    </form>
  </div>
</div>
{% endmacro %}